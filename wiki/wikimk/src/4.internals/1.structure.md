---
title: Internal structure
---

# Internal structure of the CBuild

::: entry

[cbuild.h]{.red} file is an autogenerated file, created to make using this build system easier. This documentation will refer to CBuild as to collection of 10 files in [src/]{.blue} directory of this repository. This are *15* main modes and *1* implementation file ([impl.c]{.blue}):

* [common.h]{.green} - Common and misceleanous code and all includes.
* [Term.h]{.green} - ANSI wrappers.
* [Log.h]{.green} - Generick printf-style logger, implements log levels.
* [Arena]{.green} - [EXPERIMENTAL module!]{.red} Provides temporary allocator.
* [DynArray.h]{.green} - Implementation of dynamic array in C.
* [StringView.h]{.green} - Implementation of a string view.
* [StringBuilder.h]{.green} - String builder based on dynamic array implementation.
* [Map.h]{.green} - Hash map implementation.
* [Stack.h]{.green} - Very simple dynamic stack implementation.
* [Proc.h]{.green} - Few utilites to work with child processes.
* [Command.h]{.green} - Command runner.
* [FS.h]{.green} - Filesystem and file APIs.
* [Compile.h]{.green} - Few utilites usefull when writing build scripts.
* [DLload.h]{.green} - Runtime dynamic loader abstraction.
* [FlagParse.h]{.green} - CLI flag parser.

The only real self-contained module is [common.h]{.green}. Second is [Term.h]{.green} that depends only on common module. [Log.h]{.green} depends on both. Then datatype modules - they depends on everything before - common module and logger. [StringBuilder.h]{.green} has more dependencies - dynamic array and string view are used. Dynamic array because string builder is a simple alias for it and string view - for inter-operations. [Proc.h]{.green} is the same - only common and logger modules are required. Both [Command.h]{.green} and [Compile.h]{.green} depends on common and logger modules as usual, but also has dependencies on dynamic array and string builder. [Compile.h]{.green} in addition also require filesystem module. [FS.h]{.green} depends on common and logger modules only. [DLLoad.h]{.green} is only dependant on common module. [FlagParse]{.green} depends on both common and log modules and also on dynamic arrays, string builder and string view.

[cbuild.h]{.red} header is simply a collection of other header, packed in a specifc order to make them work. Current build system limitation is includes. Only [common.h]{.red} can have included that will be in resulting [cbuild.h]{.red}.

:::